<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>PurpleStock ‚Ä¢ Controle de Estoque</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --roxo:#7C3AED;
  --roxo-escuro:#5B21B6;
  --fundo:#F5F3FF;
  --card:#FFFFFF;
  --texto:#1F2937;
  --cinza:#E5E7EB;
  --verde:#22C55E;
  --vermelho:#EF4444;
}

*{box-sizing:border-box;font-family:'Inter',sans-serif}

body{
  margin:0;
  background:var(--fundo);
  color:var(--texto);
  display:flex;
  height:100vh;
}

/* SIDEBAR */
.sidebar{
  width:240px;
  background:linear-gradient(180deg,var(--roxo),var(--roxo-escuro));
  color:white;
  padding:25px;
  display:flex;
  flex-direction:column;
}

.logo{
  font-size:22px;
  font-weight:700;
  margin-bottom:40px;
}

.menu a{
  color:white;
  text-decoration:none;
  display:block;
  padding:12px 15px;
  border-radius:10px;
  margin-bottom:8px;
}

.menu a:hover{
  background:rgba(255,255,255,.15);
}

/* MAIN */
.main{
  flex:1;
  padding:30px;
  overflow:auto;
}

h2{
  margin:0 0 20px 0;
}

/* DASHBOARD */
.kpis{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:20px;
}

.kpi{
  background:var(--card);
  border-radius:18px;
  padding:20px;
  box-shadow:0 10px 25px rgba(0,0,0,.08);
}

.kpi span{
  font-size:13px;
  opacity:.7;
}

.kpi h1{
  margin:10px 0 0;
}

/* GRIDS */
.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;
  margin-top:30px;
}

.card{
  background:var(--card);
  border-radius:18px;
  padding:20px;
  box-shadow:0 10px 25px rgba(0,0,0,.08);
}

/* FORM */
input,select,button{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:1px solid var(--cinza);
  margin-top:10px;
}

button{
  background:var(--roxo);
  color:white;
  border:none;
  font-weight:600;
  cursor:pointer;
}

button:hover{opacity:.9}

/* TABLE */
table{
  width:100%;
  border-collapse:collapse;
  margin-top:15px;
}

th,td{
  padding:12px;
  text-align:left;
}

th{
  font-size:13px;
  opacity:.7;
}

tr:not(:last-child){
  border-bottom:1px solid var(--cinza);
}

.badge{
  padding:5px 10px;
  border-radius:999px;
  color:white;
  font-size:12px;
}

.ok{background:var(--verde)}
.low{background:var(--vermelho)}

.actions button{
  width:auto;
  padding:6px 10px;
  margin-right:5px;
}

/* SECTION */
.section{
  margin-top:50px;
}
</style>
</head>

<body>

<div class="sidebar">
  <div class="logo">üü£ PurpleStock</div>
  <div class="menu">
    <a>Dashboard</a>
    <a>Produtos</a>
    <a>Movimenta√ß√µes</a>
    <a>Relat√≥rios</a>
  </div>
</div>

<div class="main">

  <!-- DASHBOARD -->
  <h2>Dashboard</h2>
  <div class="kpis">
    <div class="kpi"><span>Produtos</span><h1 id="totalProdutos">0</h1></div>
    <div class="kpi"><span>Total em Estoque</span><h1 id="totalEstoque">0</h1></div>
    <div class="kpi"><span>Estoque Baixo</span><h1 id="estoqueBaixo">0</h1></div>
  </div>

  <div class="grid">
    <div class="card"><canvas id="graficoCategorias"></canvas></div>
    <div class="card"><canvas id="graficoMovimentacoes"></canvas></div>
  </div>

  <!-- PRODUTOS -->
  <div class="section">
    <h2>Produtos</h2>
    <div class="grid">
      <div class="card">
        <input id="nome" placeholder="Nome do produto">
        <input id="categoria" placeholder="Categoria">
        <input id="quantidade" type="number" placeholder="Quantidade">
        <input id="minimo" type="number" placeholder="Estoque m√≠nimo">
        <button onclick="addProduto()">Adicionar Produto</button>
      </div>

      <div class="card">
        <select id="filtroCategoria" onchange="renderProdutos()">
          <option value="">Todas categorias</option>
        </select>

        <table>
          <thead>
            <tr>
              <th>Produto</th>
              <th>Qtd</th>
              <th>Status</th>
              <th>A√ß√µes</th>
            </tr>
          </thead>
          <tbody id="listaProdutos"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- HIST√ìRICO -->
  <div class="section">
    <h2>Hist√≥rico</h2>
    <div class="card">
      <div class="grid">
        <input type="date" id="dataInicio">
        <input type="date" id="dataFim">
      </div>
      <button style="margin-top:15px" onclick="renderHistorico()">Filtrar</button>

      <table>
        <thead>
          <tr>
            <th>Data</th>
            <th>Produto</th>
            <th>Tipo</th>
            <th>Qtd</th>
          </tr>
        </thead>
        <tbody id="historico"></tbody>
      </table>
    </div>
  </div>

</div>

<script>
let produtos = JSON.parse(localStorage.getItem('produtos')) || [];
let historico = JSON.parse(localStorage.getItem('historico')) || [];

function salvar(){
  localStorage.setItem('produtos',JSON.stringify(produtos));
  localStorage.setItem('historico',JSON.stringify(historico));
  renderTudo();
}

function addProduto(){
  produtos.push({nome:nome.value,categoria:categoria.value,quantidade:+quantidade.value,minimo:+minimo.value});
  historico.push({data:new Date(),produto:nome.value,tipo:'Entrada',qtd:+quantidade.value});
  salvar();
}

function movimentar(i,tipo){
  let qtd=+prompt("Quantidade:");
  if(!qtd)return;
  produtos[i].quantidade+=tipo==='Entrada'?qtd:-qtd;
  historico.push({data:new Date(),produto:produtos[i].nome,tipo,qtd});
  salvar();
}

function renderProdutos(){
  listaProdutos.innerHTML='';
  filtroCategoria.innerHTML='<option value="">Todas categorias</option>';
  [...new Set(produtos.map(p=>p.categoria))].forEach(c=>filtroCategoria.innerHTML+=`<option>${c}</option>`);

  produtos.filter(p=>!filtroCategoria.value||p.categoria===filtroCategoria.value)
  .forEach((p,i)=>{
    listaProdutos.innerHTML+=`
      <tr>
        <td>${p.nome}</td>
        <td>${p.quantidade}</td>
        <td><span class="badge ${p.quantidade<=p.minimo?'low':'ok'}">${p.quantidade<=p.minimo?'Baixo':'OK'}</span></td>
        <td class="actions">
          <button onclick="movimentar(${i},'Entrada')">+</button>
          <button onclick="movimentar(${i},'Sa√≠da')">-</button>
        </td>
      </tr>`;
  });
}

function renderHistorico(){
  historicoEl.innerHTML='';
  let ini=new Date(dataInicio.value||'1900-01-01');
  let fim=new Date(dataFim.value||'2999-12-31');

  historico.filter(h=>new Date(h.data)>=ini && new Date(h.data)<=fim)
  .forEach(h=>{
    historicoEl.innerHTML+=`
      <tr>
        <td>${new Date(h.data).toLocaleString()}</td>
        <td>${h.produto}</td>
        <td>${h.tipo}</td>
        <td>${h.qtd}</td>
      </tr>`;
  });
}

function renderDashboard(){
  totalProdutos.innerText=produtos.length;
  totalEstoque.innerText=produtos.reduce((a,b)=>a+b.quantidade,0);
  estoqueBaixo.innerText=produtos.filter(p=>p.quantidade<=p.minimo).length;

  new Chart(graficoCategorias,{type:'doughnut',data:{
    labels:[...new Set(produtos.map(p=>p.categoria))],
    datasets:[{data:produtos.map(p=>p.quantidade)}]
  }});

  let ent=historico.filter(h=>h.tipo==='Entrada').length;
  let sai=historico.filter(h=>h.tipo==='Sa√≠da').length;
  new Chart(graficoMovimentacoes,{type:'bar',data:{labels:['Entradas','Sa√≠das'],datasets:[{data:[ent,sai]}]}})
}

function renderTudo(){
  renderProdutos();
  renderHistorico();
  renderDashboard();
}

renderTudo();
</script>

</body>
</html>
